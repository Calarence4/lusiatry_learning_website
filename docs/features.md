# 新功能需求文档

## 一、课程追踪增强

### 1. 进度日志（仿 Bangumi）
- **描述**: 记录每次学习的进度变化，形成时间线
- **功能点**:
  - 每次更新进度时自动记录日志
  - 支持添加学习笔记/心得
  - 时间线展示历史进度
  - 统计学习频率和规律

### 2. 课程状态分类
- **状态**: 未开始 / 进行中 / 已完成
- **UI**: 左侧小标签切换筛选
- **交互**: 点击标签切换显示对应状态的课程

---

## 二、学习目标模块

### 功能描述
挂起学习目标，支持大目标和小目标，可设置 DDL

### 设计建议
- DDL 管理推荐使用现有的"打卡计划"模块
- 学习目标可作为长期任务纳入打卡系统
- 支持目标拆解（大目标 → 子目标）

---

## 三、知识库增强

### 1. 笔记阅读模式
- **描述**: 区分编辑模式和阅读模式
- **功能点**:
  - 阅读模式隐藏编辑工具栏
  - 更好的排版展示
  - 快捷键切换模式

### 2. Obsidian 双链
- **描述**: 支持 `[[笔记名]]` 语法创建笔记间链接
- **功能点**:
  - 自动识别 `[[]]` 语法
  - 点击跳转到对应笔记
  - 反向链接展示（哪些笔记引用了当前笔记）
  - 不存在的链接显示为红色，点击可创建

### 3. 笔记外部导入
- **描述**: 支持导入外部 Markdown 文件
- **功能点**:
  - 单文件导入
  - 批量导入（文件夹）
  - 保持原有目录结构
  - 支持 `.md` 格式

### 4. LaTeX 渲染
- **描述**: 支持数学公式渲染
- **功能点**:
  - 行内公式: `$...$`
  - 块级公式: `$$...$$`
  - 推荐使用 KaTeX 库（轻量快速）

### 5. 笔记自动命名
- **描述**: 根据进入位置（所在文件夹/学科）自动生成笔记名
- **规则**: `[学科名]-[日期]-[序号]` 或 `[父文件夹]-笔记[序号]`

---

## 四、UI 组件库

### 自定义提示组件
替换系统 `alert()`，统一视觉风格

#### Toast 通知
- 成功：绿色 ✓
- 错误：红色 ✗
- 警告：橙色 ⚠
- 位置：右上角，自动消失

#### 表单验证反馈
- 必填字段未填：边框标红
- 错误时摇晃动画
- 输入框下方显示错误提示文字

---

## 技术选型建议

| 功能 | 推荐方案 |
|------|----------|
| Toast 通知 | react-hot-toast 或自建组件 |
| 表单验证 | react-hook-form + 自定义样式 |
| LaTeX 渲染 | KaTeX |
| Markdown 双链 | 自定义解析器 + remark 插件 |
| 文件导入 | 原生 File API |
| 进度日志 | 新建 `course_logs` 表 |
